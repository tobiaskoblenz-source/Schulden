<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Login ‚Äì Schulden Manager</title>
  <style>
    :root{
      --bg:#0f172a;
      --card:#1e293b;
      --panel:#111827;
      --text:#f1f5f9;
      --muted:#94a3b8;
      --accent:#e6b8a2;
      --danger:#ef4444;
      --success:#22c55e;
    }
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      font-family:Inter, system-ui, Arial, sans-serif;
      background:linear-gradient(180deg,#1e293b,#0f172a);
      color:var(--text);
      padding:20px;
    }
    .wrap{width:min(520px,100%);}
    .card{
      background:var(--card);
      border-radius:22px;
      padding:22px;
      border:1px solid rgba(255,255,255,.06);
      box-shadow:0 10px 30px rgba(0,0,0,.45);
      text-align:center;
    }
    h1{margin:0;font-size:22px;}
    .sub{color:var(--muted);margin:8px 0 18px;font-size:14px;}
    .loginNarrow{
      width:100%;
      max-width:360px;
      margin:0 auto;
      display:block;
    }
    input,button{
      padding:12px 16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.08);
      font-size:16px;
      background:var(--panel);
      color:var(--text);
      box-sizing:border-box;
    }
    input{text-align:left;outline:none;}
    button{
      background:var(--accent);
      color:#1e293b;
      font-weight:700;
      cursor:pointer;
    }
    button.secondary{background:rgba(255,255,255,.04);color:var(--text);}
    .loginActions{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top:12px;
      align-items:center;
    }
    .meta{
      margin:10px auto 0;
      max-width:360px;
      display:flex;
      justify-content:space-between;
      color:var(--muted);
      font-size:13px;
    }
    .status{
      margin:14px auto 0;
      max-width:360px;
      padding:10px 12px;
      border-radius:14px;
      background:rgba(255,255,255,.04);
      border:1px solid rgba(255,255,255,.08);
      font-size:14px;
    }
    .status.error{border-color:rgba(239,68,68,.35);color:#fecaca;}
    .status.ok{border-color:rgba(34,197,94,.35);color:#bbf7d0;}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>üîê Schulden Manager</h1>
      <div class="sub">Bitte einloggen (Passwort ‚â• 6 Zeichen)</div>

      <input id="email" class="loginNarrow" type="email" placeholder="E-Mail">
      <div style="height:10px"></div>
      <input id="pass" class="loginNarrow" type="password" placeholder="Passwort">

      <div class="meta">
        <label><input id="showPass" type="checkbox"> Passwort anzeigen</label>
      </div>

      <div class="loginActions">
        <button id="login" class="loginNarrow">Login</button>
        <button id="register" class="loginNarrow secondary">Registrieren</button>
      </div>

      <div id="status" class="status">Nicht eingeloggt</div>
    </div>
  </div>

  <script>
    const $ = (id)=>document.getElementById(id);
    $("showPass").onchange = ()=>{$("pass").type = $("showPass").checked?"text":"password";}
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, createUserWithEmailAndPassword }
      from "https://www.gstatic.com/firebasejs/12.9.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCWAvq7GuEhF2jaL8xFrb_MJ34_dZD0Hkk",
      authDomain: "schulden-36186.firebaseapp.com",
      projectId: "schulden-36186",
      storageBucket: "schulden-36186.firebasestorage.app",
      messagingSenderId: "483402986505",
      appId: "1:483402986505:web:1bf7cafce628bbd486b4d8"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    const statusEl = document.getElementById("status");
    const setStatus = (t,c)=>{statusEl.textContent=t;statusEl.className="status"+(c?" "+c:"");};

    onAuthStateChanged(auth,(u)=>{if(u) location.replace("./app.html");});

    $("login").onclick = async ()=>{
      setStatus("Login‚Ä¶");
      try{await signInWithEmailAndPassword(auth,email.value.trim(),pass.value);}
      catch(e){setStatus(e.message,"error");}
    };

    $("register").onclick = async ()=>{
      setStatus("Registrierung‚Ä¶");
      try{await createUserWithEmailAndPassword(auth,email.value.trim(),pass.value);}
      catch(e){setStatus(e.message,"error");}
    };
  </script>
</body>
</html>
